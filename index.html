<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Dagoba Tailwind Demo</title>
  <link href="./dist/styles.css" rel="stylesheet">
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">
  <div class="bg-white p-8 rounded-lg shadow-lg w-full max-w-xl">
    <h1 class="text-2xl font-bold mb-4">🕸️ Dagoba Graph</h1>
    <div class="space-y-2 mb-4">
      <button class="bg-blue-600 text-white px-4 py-2 rounded" onclick="createSampleData()">Create Sample Graph</button>
      <button class="bg-blue-600 text-white px-4 py-2 rounded" onclick="showGraph()">Show All Data</button>
    </div>
    <h2 class="text-xl font-semibold mb-2">Try Queries</h2>
    <div class="flex flex-wrap gap-2 mb-4">
      <button class="bg-blue-600 text-white px-3 py-1 rounded" onclick="findThorsParents()">Thor's Parents</button>
      <button class="bg-blue-600 text-white px-3 py-1 rounded" onclick="findOdinsChildren()">Odin's Children</button>
      <button class="bg-blue-600 text-white px-3 py-1 rounded" onclick="findAllAesir()">All Aesir</button>
      <button class="bg-blue-600 text-white px-3 py-1 rounded" onclick="findParentNames()">Parent Names</button>
    </div>
    <div class="mb-4">
      <input id="customQuery" type="text"
             placeholder="g.v('Thor').out('parent').property('name').run()"
             class="w-full p-2 border rounded">
      <button class="bg-green-600 text-white px-4 py-2 rounded mt-2" onclick="runCustomQuery()">Run Custom Query</button>
    </div>
    <pre id="output" class="bg-gray-50 p-4 rounded h-48 overflow-auto text-sm"></pre>
  </div>
  <script src="dagoba.js"></script>
  <script>
    let g;
    function log(msg) {
      document.getElementById('output').textContent = msg;
    }
    function createSampleData() {
      g = Dagoba.graph();
      ['Thor','Odin','Frigg','Loki','Baldr'].forEach(id =>
        g.addVertex({_id:id,name:id,species:id=='Loki'?'Giant':'Aesir'}));
      g.addEdge({_out:'Thor',_in:'Odin',_label:'parent'});
      g.addEdge({_out:'Thor',_in:'Frigg',_label:'parent'});
      g.addEdge({_out:'Baldr',_in:'Odin',_label:'parent'});
      g.addEdge({_out:'Baldr',_in:'Frigg',_label:'parent'});
      g.addEdge({_out:'Thor',_in:'Loki',_label:'friend'});
      log('✅ Sample graph created!');
    }
    function showGraph() { if(!g) return log('❌ Create data first'); log(JSON.stringify({V:g.vertices.length,E:g.edges.length,data:JSON.parse(g.toString())},null,2)); }
    function findThorsParents(){ if(!g) return log('❌'); log(JSON.stringify(g.v('Thor').out('parent').run(),null,2)); }
    function findOdinsChildren(){ if(!g) return log('❌'); log(JSON.stringify(g.v('Odin').in('parent').run(),null,2)); }
    function findAllAesir(){ if(!g) return log('❌'); log(JSON.stringify(g.v().filter({species:'Aesir'}).run(),null,2)); }
    function findParentNames(){ if(!g) return log('❌'); log(JSON.stringify(g.v('Thor').out('parent').property('name').run(),null,2)); }
    function runCustomQuery(){
      if(!g) return log('❌');
      try{ log(JSON.stringify(eval(document.getElementById('customQuery').value),null,2)); }
      catch(e){ log('❌ '+e.message); }
    }
    window.onload = ()=>log('🚀 Ready!');
  </script>
</body>
</html>
